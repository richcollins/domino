dm={};dm.Object_clone=function(a){dm.Proto_constructor.prototype=a;return new dm.Proto_constructor};dm.Object_shallowCopy=function(c){var a={};for(var b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}return a};dm.Object_eachSlot=function(c,b){for(var a in c){if(c.hasOwnProperty(a)){b(a,c[a])}}};dm.Object_withLowerCaseKeys=function(b){var a={};dm.Object_eachSlot(b,function(d,c){a[d.toLowerCase()]=c});return a};dm.Arguments_asArray=function(a){return Array.prototype.slice.call(a)};dm.Object_lookupPath=function(c,b){b=b.split(".");var a;while(c&&(a=b.shift())){c=c[a]}return c};if(!Array.prototype.forEach){Array.prototype.forEach=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}}}String.prototype.asCapitalized=function(){return this.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})};dm.Proto=new Object;dm.Proto.setSlot=function(a,b){this[a]=b;return this};dm.Proto.uniqueIdCounter=0;dm.Proto.setSlots=function(b){for(name in b){if(b.hasOwnProperty(name)){var a=b[name];if(typeof(a)=="function"){var c={protoName:this._type,methodName:name};a.functionInfo=c;a.name=this._type+"."+name}this.setSlot(name,a)}}if(b.hasOwnProperty("toString")){this.toString=b.toString}return this};dm.Proto_constructor=new Function;dm.Proto.setSlots({constructor:new Function,clone:function(){dm.Proto_constructor.prototype=this;var a=new dm.Proto_constructor;a._proto=this;a._uniqueId=++dm.Proto.uniqueIdCounter;a._applySuperMap={};if(a.init){a.init()}return a},_applySuperMap:{},applySuper:function(a,c){var b=this._applySuperMap;lookupProto=b[a]||this;if(!lookupProto._proto){return undefined}var f=lookupProto._proto;var h=lookupProto[a];while(f&&(h==f[a])){f=f._proto}var d=f[a];if(f&&d&&typeof(d)=="function"){b[a]=f;try{return f[a].apply(this,c)}catch(g){throw g}finally{delete b[a]}}},uniqueId:function(){return this._uniqueId},proto:function(){return this._proto},removeSlots:function(){this.argsAsArray(arguments).forEach(function(a){delete this["_"+name];delete this[name];delete this["set"+name.asCapitalized()]});return this},setSlotsIfAbsent:function(a){for(name in a){if(!this[name]&&a.hasOwnProperty(name)){this[name]=a[name]}}if(a.hasOwnProperty("toString")){this.toString=a.toString}return this},printSlotCalls:function(){var c=[];for(var a in SlotCalls){var d={};d.name=a;d.count=SlotCalls[a];c.push(d)}c.sort(function(e,f){return e.count-f.count});for(var b=0;b<c.length;b++){Logger.log(c[b].name+":"+c[b].count)}},newSlot:function(b,a){if(typeof(b)!="string"){throw"name must be a string"}if(a===undefined){a=null}this["_"+b]=a;this[b]=function(){return this["_"+b]};this["set"+b.asCapitalized()]=function(c){this["_"+b]=c;return this};return this},newLazySlot:function(b,a){this[b]=function(){if(this["_"+b]===undefined){this["_"+b]=a}return this["_"+b]};this["set"+b.asCapitalized()]=function(c){this["_"+b]=c;return this};return this},newLazySlots:function(){var c=this.argsAsArray(arguments);var b={};if(c.length>1||typeof(c[0])=="string"){c.forEach(function(d){b[d]=null})}else{b=c[0]}for(var a in b){this.newLazySlot(a,b[a])}return this},aliasSlot:function(a,b){this[b]=this[a];this["set"+b.asCapitalized()]=this["set"+a.asCapitalized()];return this},argsAsArray:function(a){return Array.prototype.slice.call(a)},newSlots:function(){var c=this.argsAsArray(arguments);var b={};if(c.length>1||typeof(c[0])=="string"){c.forEach(function(d){b[d]=null})}else{b=c[0]}for(var a in b){this.newSlot(a,b[a])}return this},newNumberSlot:function(b,a){this.newSlot(b,a||0);this["inc"+b.asCapitalized()+"By"]=function(c){this["_"+b]+=c};this["inc"+b.asCapitalized()]=function(){this["_"+b]++};this["dec"+b.asCapitalized()+"By"]=function(c){this["_"+b]-=c};this["dec"+b.asCapitalized()]=function(){this["_"+b]--};return this},newNumberSlots:function(){this.argsAsArray(arguments).forEach(function(a){this.newNumberSlot(a)},this);return this},forEachSlot:function(b){for(var a in this){if(this.hasOwnProperty(a)){b(this[a],a)}}return this},canPerform:function(a){return this[a]&&typeof(this[a])=="function"},performWithArgList:function(b,a){return this[b].apply(this,a)},perform:function(a){return this[a].apply(this,this.argsAsArray(arguments).slice(1))},conditionallyPerform:function(a){if(this[a]&&this[a].call){return this.perform.apply(this,arguments)}else{return null}},performSets:function(b){for(var a in b){if(b.hasOwnProperty(a)){this.conditionallyPerform("set"+a.asCapitalized(),b[a])}}return this},slotsObject:function(){var b={};for(var a in this){if(a.beginsWith("_")){b[a.after("_")]=this[a]}}delete b.proto;delete b.sender;delete b.type;delete b.uniqueId;return b}});dm.Proto.newSlot("type","dm.Proto");dm.Proto.newSlot("sender",null);dm.Proto.removeSlot=dm.Proto.removeSlots;dm.Browser=dm.Proto.clone().setSlots({userAgent:function(){if(typeof window!="undefined"&&typeof window.navigator!="undefined"){return window.navigator.userAgent}else{return""}},isInternetExplorer:function(){return navigator.appName.indexOf("Internet Explorer")>-1},isIE8:function(){return this.userAgent().indexOf("MSIE 8.0")!=-1},isIE6:function(){return this.isInternetExplorer()&&!window.XMLHttpRequest},isGecko:function(){return this.userAgent().indexOf("Gecko")!=-1},isSafari:function(){return this.userAgent().indexOf("Safari")!=-1},version:function(){if(this.isGecko()){var a=this.userAgent().indexOf("Firefox");return(a==-1)?2:parseFloat(this.userAgent().substring(a+"Firefox".length+1))}else{return null}},locationAsUri:function(){return Uri.withString(window.location.href)}});Array.prototype.setSlotsIfAbsent=dm.Proto.setSlotsIfAbsent;Array.prototype.argsAsArray=dm.Proto.argsAsArray;Array.prototype.setSlotsIfAbsent=dm.Proto.setSlotsIfAbsent;String.prototype.setSlotsIfAbsent=dm.Proto.setSlotsIfAbsent;Number.prototype.setSlotsIfAbsent=dm.Proto.setSlotsIfAbsent;dm.Importer=dm.Proto.clone().setType("dm.Importer").newSlots({basePath:null,addsTimestamp:false}).setSlots({importPaths:function(d){for(var b=0;b<d.length;b++){if(this.basePath()){var c=this.basePath()+"/"+d[b]}else{var c=d[b]}c=c+".js";var a='<script type="text/javascript" src="'+c+(this.addsTimestamp()?("?"+new Date().getTime()):"")+'"><\/script>';document.write(a)}return this},extendBasePath:function(a){this.setBasePath(this.basePath()+"/"+a);return this},useSiblingPath:function(a){this.setBasePath(this.basePath().siblingPath(a));return this}});Array.prototype.setSlotsIfAbsent({init:function(){var a=[0,this.length];a.concatInPlace(this.slice());this.splice.apply(this,a)},empty:function(){this.splice(0,this.length);return this},isEmpty:function(){return this.length==0},concatInPlace:function(a){this.push.apply(this,a)},at:function(a){if(a>0){return this[a]}else{return this[this.length+a]}},removeElements:function(a){a.forEach(function(b){this.remove(b)},this);return this},append:function(a){this.push(a);return this},appendAll:function(b){var a=this;b.forEach(function(c){a.push(c)});return this},prepend:function(a){this.unshift(a);return this},remove:function(b){var a=this.indexOf(b);if(a>-1){this.removeAt(a)}return this},removeAt:function(a){this.splice(a,1);return this},insertAt:function(a,b){console.log("insertAt deprecated -- use atInsert");return this.atInsert(a,b)},atInsert:function(a,b){this.splice(a,0,b);return this},replace:function(c,b){var a=this.indexOf(c);if(a>-1){this.removeAt(a);this.atInsert(a,b)}return this},replaceElements:function(a){this.empty().splice.apply(this,a.copy().prepend(0).prepend(a.length));return this},copy:function(){return this.slice()},first:function(){return this[0]},rest:function(){var b=this.copy();b.removeFirst();return b},last:function(a){return this[this.length-1]},appendIfAbsent:function(){var a=this;this.argsAsArray(arguments).forEach(function(b){if(a.indexOf(b)==-1){a.push(b)}});return this},split:function(e){var c=[];var d=Math.ceil(this.length/e);for(var b=0;b<this.length;b+=d){var f=this.slice(b,b+d);if(f.length<d){var a=c.pop();if(a){f=a.concat(f)}}c.push(f)}return c},map:function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in this){e[c]=b.call(d,this[c],c,this)}}return e},shuffle:function(){var b=this.length;if(b==0){return false}while(--b){var a=Math.floor(Math.random()*(b+1));var d=this[b];var c=this[a];this[b]=c;this[a]=d}},forEachCall:function(b){var a=this.argsAsArray(arguments).slice(1);a.push(0);this.forEach(function(d,c){a[a.length-1]=c;d[b].apply(d,a)});return this},forEachPerform:function(){return this.forEachCall.apply(this,arguments)},sortPerform:function(b){var a=this.argsAsArray(arguments).slice(1);return this.sort(function(d,f){var e=d[b].apply(d,a);var c=f[b].apply(f,a);if(e<c){return -1}else{if(c<e){return 1}else{return 0}}})},mapPerform:function(a){var b=this.argsAsArray(arguments).slice(1);b.push(0);return this.map(function(d,c){b[b.length-1]=c;return d[a].apply(d,b)})},detectPerform:function(b){var a=this.argsAsArray(arguments).slice(1);return this.detect(function(d,c){return d[b].apply(d,a)})},reduce:function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=0;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){d=this[c++];break}if(++c>=a){throw new TypeError()}}while(true)}for(;c<a;c++){if(c in this){d=b.call(null,d,this[c],c,this)}}return d},filter:function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=new Array();var d=arguments[1];for(var c=0;c<a;c++){if(c in this){var f=this[c];if(b.call(d,f,c,this)){e.push(f)}}}return e},filterPerform:function(a){var b=this.argsAsArray(arguments).slice(1);b.push(0);return this.filter(function(d,c){b[b.length-1]=c;return d[a].apply(d,b)})},rejectPerform:function(a){var b=this.argsAsArray(arguments).slice(1);b.push(0);return this.filter(function(d,c){b[b.length-1]=c;return !d[a].apply(d,b)})},detect:function(b){for(var a=0;a<this.length;a++){if(b(this[a])){return this[a]}}return null},detectSlot:function(a,c){for(var b=0;b<this.length;b++){if(this[b].conditionallyPerform(a)==c){return this[b]}}return null},detectProperty:function(a,c){for(var b=0;b<this.length;b++){if(this[b][a]==c){return this[b]}}return null},detectIndex:function(b){for(var a=0;a<this.length;a++){if(b(this[a])){return a}}return null},max:function(f){var a=undefined;var c=undefined;var e=this.length;for(var d=0;d<e;d++){var b=this[d];if(f){b=f(b)}if(a==undefined||b>a){a=b;c=this[d]}}return c},maxIndex:function(f){var a=undefined;var c=0;var e=this.length;for(var d=0;d<e;d++){var b=this[d];if(f){b=f(b)}if(a==undefined||b>a){a=b;c=d}}return c},min:function(f){var a=undefined;var c=undefined;var e=this.length;for(var d=0;d<e;d++){var b=this[d];if(f){b=f(b)}if(a==undefined||b<a){a=b;c=this[d]}}return c},minIndex:function(f){var a=undefined;var c=0;var e=this.length;for(var d=0;d<e;d++){var b=this[d];if(f){b=f(b)}if(a==undefined||b<a){a=b;c=d}}return c},sum:function(f){var a=undefined;var d=0;var e=this.length;for(var c=0;c<e;c++){var b=this[c];if(f){b=f(b)}d=d+b}return d},some:function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&b.call(d,this[c],c,this)){return true}}return false},every:function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&!b.call(d,this[c],c,this)){return false}}return true},allRespondTrue:function(a){return this.every(function(b){return b.perform(a)})},firstRespondingTrue:function(a){return this.detect(function(b){return b.perform(a)})},indexOf:function(b){var a=this.length;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1},contains:function(a){return this.indexOf(a)>-1},removeFirst:function(){return this.shift()},removeLast:function(){return this.pop()},hasPrefix:function(b){if(this.length<b.length){return false}for(var a=0;a<this.length;a++){if(this[a]!=b[a]){return false}}return true},toString:function(){var b="[";for(var a=0;a<this.length;a++){var c=this[a];if(a!=0){b=b+","}if(typeof(c)=="string"){b=b+'"'+c+'"'}else{b=b+c}}return b+"]"},isEqual:function(b){if(this.length!=b.length){return false}for(var a=0;a<this.length;a++){if(this[a]!=b[a]){return false}}return true},atInsert:function(a,b){this.splice(a,0,b)},size:function(){return this.length},itemAfter:function(a){var b=this.indexOf(a);if(b==-1){return null}b=b+1;if(b>this.length-1){return null}if(this[b]!=undefined){return this[b]}return null},itemBefore:function(a){var b=this.indexOf(a);if(b==-1){return null}b=b-1;if(b<0){return null}if(this[b]){return this[b]}return null},isArray:true});Array.wrap=function(a){if(a.isArray){return a}else{return[a]}};Number.prototype.setSlotsIfAbsent({cssString:function(){return this.toString()},milliseconds:function(){return this},seconds:function(){return Number(this)*1000},minutes:function(){return this.seconds()*60},hours:function(){return this.minutes()*60},days:function(){return this.hours()*24},years:function(){return this.days()*365},repeat:function(b){for(var a=0;a<this;a++){b(a)}return this},map:function(){var b=[];for(var c=0;c<this;c++){b.push(c)}return Array.prototype.map.apply(b,arguments)},isEven:function(){return this%2==0},abs:function(){return Math.abs(this)}});String.prototype.setSlotsIfAbsent({cssString:function(){return this},replaceSeq:function(d,c){var f=this;var e;if(c.contains(d)){throw"substring contains replace string"}while(true){var e=f.replace(d,c);if(e==f){return e}f=e}return this},repeated:function(c){var a="";var b=this;c.repeat(function(){a+=b});return a},isEmpty:function(){return this.length==0},beginsWith:function(a){if(!a){return false}return this.indexOf(a)==0},removePrefix:function(a){return this.substring(this.beginsWith(a)?a.length:0)},endsWith:function(b){var a=this.lastIndexOf(b);return(a>-1)&&(this.lastIndexOf(b)==this.length-b.length)},removeSuffix:function(a){if(this.endsWith(a)){return this.substr(0,this.length-a.length)}else{return this}},trim:function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},hostName:function(){var a=this.removePrefix("http://");return a.slice(0,a.indexOf("/"))},contains:function(a){return this.indexOf(a)>-1},before:function(a){var b=this.indexOf(a);if(b==-1){return null}else{return this.slice(0,b)}},after:function(a){var b=this.indexOf(a);if(b==-1){return null}else{return this.slice(b+a.length)}},between:function(b,c){var d=this.after(b);if(d!=null){var a=d.before(c);if(a!=null){return a}else{return null}}else{return null}},asUncapitalized:function(){return this.replace(/\b[A-Z]/g,function(a){return a.toLowerCase()})},asCapitalized:function(){return this.replace(/\b[A-Z]/g,function(a){return a.toUpperCase()})},containsCapitals:function(){return this.search(/[A-Z]/g)>-1},charAt:function(a){return this.slice(a,a+1)},first:function(){return this.slice(0,1)},asNumber:function(){return Number(this)},stringCount:function(a){return this.split(a).length-1},lineCount:function(){return this.stringCount("\n")},pathComponents:function(){return this.split("/")},sansLastPathComponent:function(){var a=this.pathComponents();a.removeLast();return a.join("/")},siblingPath:function(a){return this.sansLastPathComponent()+"/"+a},lastPathComponent:function(){return this.pathComponents().last()},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},fileNameSuffix:function(){var a=this.split(".").last();return a},humanized:function(){var d=[];var e=-1;var c=this.asCapitalized();for(var a=0;a<c.length;a++){if(c.slice(a,a+1).match(/[A-Z]/)){var b=c.slice(e,a);if(b){d.append(b)}e=a}}d.append(c.slice(e,a));return d.join(" ")},titleized:function(){return this.split(/\s+/).map("asCapitalized").join(" ")},base64Encoded:function(){return btoa(this)},base64UrlEncoded:function(){return this.base64Encoded().replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,",")},base64Decoded:function(){return atob(this)},base64UrlDecoded:function(){return this.replace(/-/g,"+").replace(/_/g,"/").replace(/,/g,"=").base64Decoded()},pathExtension:function(){var a=this.split("?").first().split("/").last().split(".");if(a.length>1){return a.at(-1)}else{return null}}});String.prototype.asMD5Hex=function(){var q=0;var z="";function p(C){return A(n(r(C)))}function o(C){return b(n(r(C)))}function i(C,D){return e(n(r(C)),D)}function x(C,D){return A(g(r(C),r(D)))}function l(C,D){return b(g(r(C),r(D)))}function h(C,E,D){return e(g(r(C),r(E)),D)}function B(){return p("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function n(C){return u(f(m(C),C.length*8))}function g(E,H){var G=m(E);if(G.length>16){G=f(G,E.length*8)}var C=Array(16),F=Array(16);for(var D=0;D<16;D++){C[D]=G[D]^909522486;F[D]=G[D]^1549556828}var I=f(C.concat(m(H)),512+H.length*8);return u(f(F.concat(I),512+128))}function A(E){try{q}catch(H){q=0}var G=q?"0123456789ABCDEF":"0123456789abcdef";var D="";var C;for(var F=0;F<E.length;F++){C=E.charCodeAt(F);D+=G.charAt((C>>>4)&15)+G.charAt(C&15)}return D}function b(E){try{z}catch(I){z=""}var H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var D="";var C=E.length;for(var G=0;G<C;G+=3){var J=(E.charCodeAt(G)<<16)|(G+1<C?E.charCodeAt(G+1)<<8:0)|(G+2<C?E.charCodeAt(G+2):0);for(var F=0;F<4;F++){if(G*8+F*6>E.length*8){D+=z}else{D+=H.charAt((J>>>6*(3-F))&63)}}}return D}function e(M,E){var D=E.length;var L,H,C,N,G;var K=Array(Math.ceil(M.length/2));for(L=0;L<K.length;L++){K[L]=(M.charCodeAt(L*2)<<8)|M.charCodeAt(L*2+1)}var J=Math.ceil(M.length*8/(Math.log(E.length)/Math.log(2)));var I=Array(J);for(H=0;H<J;H++){G=Array();N=0;for(L=0;L<K.length;L++){N=(N<<16)+K[L];C=Math.floor(N/D);N-=C*D;if(G.length>0||C>0){G[G.length]=C}}I[H]=N;K=G}var F="";for(L=I.length-1;L>=0;L--){F+=E.charAt(I[L])}return F}function r(E){var D="";var F=-1;var C,G;while(++F<E.length){C=E.charCodeAt(F);G=F+1<E.length?E.charCodeAt(F+1):0;if(55296<=C&&C<=56319&&56320<=G&&G<=57343){C=65536+((C&1023)<<10)+(G&1023);F++}if(C<=127){D+=String.fromCharCode(C)}else{if(C<=2047){D+=String.fromCharCode(192|((C>>>6)&31),128|(C&63))}else{if(C<=65535){D+=String.fromCharCode(224|((C>>>12)&15),128|((C>>>6)&63),128|(C&63))}else{if(C<=2097151){D+=String.fromCharCode(240|((C>>>18)&7),128|((C>>>12)&63),128|((C>>>6)&63),128|(C&63))}}}}}return D}function v(D){var C="";for(var E=0;E<D.length;E++){C+=String.fromCharCode(D.charCodeAt(E)&255,(D.charCodeAt(E)>>>8)&255)}return C}function k(D){var C="";for(var E=0;E<D.length;E++){C+=String.fromCharCode((D.charCodeAt(E)>>>8)&255,D.charCodeAt(E)&255)}return C}function m(D){var C=Array(D.length>>2);for(var E=0;E<C.length;E++){C[E]=0}for(var E=0;E<D.length*8;E+=8){C[E>>5]|=(D.charCodeAt(E/8)&255)<<(E%32)}return C}function u(D){var C="";for(var E=0;E<D.length*32;E+=8){C+=String.fromCharCode((D[E>>5]>>>(E%32))&255)}return C}function f(M,H){M[H>>5]|=128<<((H)%32);M[(((H+64)>>>9)<<4)+14]=H;var L=1732584193;var K=-271733879;var J=-1732584194;var I=271733878;for(var E=0;E<M.length;E+=16){var G=L;var F=K;var D=J;var C=I;L=c(L,K,J,I,M[E+0],7,-680876936);I=c(I,L,K,J,M[E+1],12,-389564586);J=c(J,I,L,K,M[E+2],17,606105819);K=c(K,J,I,L,M[E+3],22,-1044525330);L=c(L,K,J,I,M[E+4],7,-176418897);I=c(I,L,K,J,M[E+5],12,1200080426);J=c(J,I,L,K,M[E+6],17,-1473231341);K=c(K,J,I,L,M[E+7],22,-45705983);L=c(L,K,J,I,M[E+8],7,1770035416);I=c(I,L,K,J,M[E+9],12,-1958414417);J=c(J,I,L,K,M[E+10],17,-42063);K=c(K,J,I,L,M[E+11],22,-1990404162);L=c(L,K,J,I,M[E+12],7,1804603682);I=c(I,L,K,J,M[E+13],12,-40341101);J=c(J,I,L,K,M[E+14],17,-1502002290);K=c(K,J,I,L,M[E+15],22,1236535329);L=j(L,K,J,I,M[E+1],5,-165796510);I=j(I,L,K,J,M[E+6],9,-1069501632);J=j(J,I,L,K,M[E+11],14,643717713);K=j(K,J,I,L,M[E+0],20,-373897302);L=j(L,K,J,I,M[E+5],5,-701558691);I=j(I,L,K,J,M[E+10],9,38016083);J=j(J,I,L,K,M[E+15],14,-660478335);K=j(K,J,I,L,M[E+4],20,-405537848);L=j(L,K,J,I,M[E+9],5,568446438);I=j(I,L,K,J,M[E+14],9,-1019803690);J=j(J,I,L,K,M[E+3],14,-187363961);K=j(K,J,I,L,M[E+8],20,1163531501);L=j(L,K,J,I,M[E+13],5,-1444681467);I=j(I,L,K,J,M[E+2],9,-51403784);J=j(J,I,L,K,M[E+7],14,1735328473);K=j(K,J,I,L,M[E+12],20,-1926607734);L=t(L,K,J,I,M[E+5],4,-378558);I=t(I,L,K,J,M[E+8],11,-2022574463);J=t(J,I,L,K,M[E+11],16,1839030562);K=t(K,J,I,L,M[E+14],23,-35309556);L=t(L,K,J,I,M[E+1],4,-1530992060);I=t(I,L,K,J,M[E+4],11,1272893353);J=t(J,I,L,K,M[E+7],16,-155497632);K=t(K,J,I,L,M[E+10],23,-1094730640);L=t(L,K,J,I,M[E+13],4,681279174);I=t(I,L,K,J,M[E+0],11,-358537222);J=t(J,I,L,K,M[E+3],16,-722521979);K=t(K,J,I,L,M[E+6],23,76029189);L=t(L,K,J,I,M[E+9],4,-640364487);I=t(I,L,K,J,M[E+12],11,-421815835);J=t(J,I,L,K,M[E+15],16,530742520);K=t(K,J,I,L,M[E+2],23,-995338651);L=a(L,K,J,I,M[E+0],6,-198630844);I=a(I,L,K,J,M[E+7],10,1126891415);J=a(J,I,L,K,M[E+14],15,-1416354905);K=a(K,J,I,L,M[E+5],21,-57434055);L=a(L,K,J,I,M[E+12],6,1700485571);I=a(I,L,K,J,M[E+3],10,-1894986606);J=a(J,I,L,K,M[E+10],15,-1051523);K=a(K,J,I,L,M[E+1],21,-2054922799);L=a(L,K,J,I,M[E+8],6,1873313359);I=a(I,L,K,J,M[E+15],10,-30611744);J=a(J,I,L,K,M[E+6],15,-1560198380);K=a(K,J,I,L,M[E+13],21,1309151649);L=a(L,K,J,I,M[E+4],6,-145523070);I=a(I,L,K,J,M[E+11],10,-1120210379);J=a(J,I,L,K,M[E+2],15,718787259);K=a(K,J,I,L,M[E+9],21,-343485551);L=s(L,G);K=s(K,F);J=s(J,D);I=s(I,C)}return Array(L,K,J,I)}function d(H,E,D,C,G,F){return s(y(s(s(E,H),s(C,F)),G),D)}function c(E,D,I,H,C,G,F){return d((D&I)|((~D)&H),E,D,C,G,F)}function j(E,D,I,H,C,G,F){return d((D&H)|(I&(~H)),E,D,C,G,F)}function t(E,D,I,H,C,G,F){return d(D^I^H,E,D,C,G,F)}function a(E,D,I,H,C,G,F){return d(I^(D|(~H)),E,D,C,G,F)}function s(C,F){var E=(C&65535)+(F&65535);var D=(C>>16)+(F>>16)+(E>>16);return(D<<16)|(E&65535)}function y(C,D){return(C<<D)|(C>>>(32-D))}return p(this)};dm.NodeWrapper=dm.Proto.clone().newSlots({type:"dm.NodeWrapper",node:null}).setSlots({allAt:function(b){var a=[];var d=this.node();for(var c=0;c<d.childNodes.length;c++){var e=d.childNodes[c];if(e.nodeName==b){a.push(dm.NodeWrapper.clone().setNode(e))}}return a},at:function(a){return this.allAt(a).first()},atts:function(){var e={};var d=this.node();if(d.attributes){for(var c=0;c<d.attributes.length;c++){var b=d.attributes[c];e[b.name]=b.value}}return e},text:function(){return this.node().textContent}});dm.Cookie=dm.Proto.clone().newSlots({type:"dm.Cookie",name:null,value:null,expirationDate:null,path:"/"}).setSlots({cookieMap:function(){var a={};document.cookie.split("; ").forEach(function(d){var b=d.before("=");var c=d.after("=");a[b]=dm.Cookie.clone().setName(b).setValue(c)});return a},at:function(a){return this.cookieMap()[a]},remove:function(){return this.setExpirationDate(new Date(0)).save()},renewOneYear:function(){return this.setExpirationDate(new Date(new Date().getTime()+(1).years())).save()},toString:function(){var a=this.expirationDate()?this.expirationDate().toGMTString():"";return this.name()+"="+this.value()+"; expires="+a+"; path="+this.path()},save:function(){document.cookie=this.toString();return this}});dm.Color=dm.Proto.clone().newSlots({red:0,green:0,blue:0,alpha:1}).setSlots({withRGBA:function(h,f,d,e){var i=this.clone();i.setRed(h);i.setGreen(f);i.setBlue(d);i.setAlpha(e);return i},withRGB:function(d,c,a){return this.withRGBA(d,c,a,1)},withHex:function(a){return dm.Color.withRGB(parseInt(a.substring(0,2),16)/255,parseInt(a.substring(2,4),16)/255,parseInt(a.substring(4,6),16)/255)}});dm.Color.setSlots({Transparent:dm.Color.clone().setAlpha(0),White:dm.Color.clone().setRed(1).setGreen(1).setBlue(1),VeryLightGray:dm.Color.clone().setRed(224/255).setGreen(224/255).setBlue(224/255),LightGray:dm.Color.clone().setRed(212/255).setGreen(212/255).setBlue(212/255),Gray:dm.Color.clone().setRed(127/255).setGreen(127/255).setBlue(127/255),DimGray:dm.Color.clone().setRed(105/255).setGreen(105/255).setBlue(105/255),Black:dm.Color.clone(),Red:dm.Color.clone().setRed(1),Green:dm.Color.clone().setGreen(1),Blue:dm.Color.clone().setBlue(1),DarkGreen:dm.Color.clone().setGreen(100/255),Yellow:dm.Color.withRGB(1,1,0)});dm.Delegator=dm.Proto.clone().newSlots({type:"dm.Delegator",delegate:null,delegatePrefix:null,messagesDelegate:true}).setSlots({init:function(){this.setDelegatePrefix(this.type().split(".").last().asUncapitalized())},delegateWith:function(a){return this.setDelegate(dm.Proto.clone().setSlots(a))},delegateMessageName:function(a){var b=this.delegatePrefix();if(b&&!a.beginsWith(b)){return this.delegatePrefix()+a.asCapitalized()}else{return a}},delegatePerform:function(a){if(this.messagesDelegate()){var b=dm.Arguments_asArray(arguments).slice(1);b.unshift(this);var c=this.delegate();a=this.delegateMessageName(a);if(c&&c.canPerform(a)){return c.performWithArgList(a,b)}}}});dm.StyleSlot=dm.Proto.clone().newSlots({type:"dm.StyleSlot",view:null,name:null,styleName:null,value:null,transformation:null}).setSlots({addToView:function(){var a=this.view();var b=this.name();var c=this.styleName();var e=this.value();var d=this.transformation();a[b]=function(){return this["_"+b]};a["set"+b.asCapitalized()]=function(f){if(this._postsStyleChanges){this.delegatePerform("styleChanged",b)}this["_"+b]=f;if(d){this.element().style[c]=d.apply(f)}else{this.element().style[c]=f}return this};a["_"+b]=e;a.styleSlots().append(this)}});dm.ColorTransformation=dm.Proto.clone().setSlots({apply:function(a){return"rgba("+[a.red()*255,a.green()*255,a.blue()*255,a.alpha()].join(",")+")"}});dm.SuffixTransformation=dm.Proto.clone().setSlots({apply:function(a){return a+this.suffix}});dm.RoundedSuffixTransformation=dm.Proto.clone().setSlots({apply:function(a){return Math.round(a)+this.suffix}});dm.Point=dm.Proto.clone().newSlots({type:"dm.Point",x:0,y:0}).setSlots({scaleToFitPoint:function(a){var b=this.aspectRatio();if(b>a.x()/a.y()){this.setX(a.x());this.setY(a.x()/b)}else{this.setX(a.y()*b);this.setY(a.y())}return this},aspectRatio:function(){return this.x()/this.y()},withXY:function(a,b){return this.clone().setX(a).setY(b)},isPortrait:function(){return this.aspectRatio()<=1},isLandscape:function(){return this.aspectRatio()>1},translateY:function(a){return this.setY(this.y()+a)},asLandscape:function(){return this.isLandscape()?this:this.transposed()},asPortrait:function(){return this.isPortrait()?this:this.transposed()},transposed:function(){return this.clone().setX(this.y()).setY(this.x())}});dm.View=dm.Delegator.clone().newSlots({type:"dm.View",superview:null,subviews:[],element:null,elementName:"div",eventListeners:null,resizesLeft:false,resizesRight:false,resizesWidth:false,resizesTop:false,resizesBottom:false,resizesHeight:false,styleSlots:[],autoResizes:true,tracksMouse:false,postsStyleChanges:false}).setSlot("newStyleSlots",function(c){for(var a in c){var e=c[a];var b=dm.StyleSlot.clone();b.setView(this);b.setName(a);b.setStyleName(e.name||a);b.setValue(e.value);if(e.transformation){var d=dm.Object_lookupPath(window,"dm."+e.transformation.name.asCapitalized()+"Transformation");if(d){b.setTransformation(d.clone().setSlots(e.transformation))}}b.addToView()}return this}).newStyleSlots({x:{name:"left",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},y:{name:"top",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},cssWidth:{name:"width",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},cssHeight:{name:"height",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},leftBorderThickness:{name:"borderLeftWidth",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},rightBorderThickness:{name:"borderRightWidth",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},topBorderThickness:{name:"borderTopWidth",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},bottomBorderThickness:{name:"borderBottomWidth",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},leftPaddingThickness:{name:"paddingLeft",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},rightPaddingThickness:{name:"paddingRight",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},topPaddingThickness:{name:"paddingTop",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},bottomPaddingThickness:{name:"paddingBottom",value:0,transformation:{name:"roundedSuffix",suffix:"px"}},borderRadius:{value:0,transformation:{name:"roundedSuffix",suffix:"px"}},borderColor:{value:dm.Color.Black,transformation:{name:"color"}},backgroundColor:{value:dm.Color.Transparent,transformation:{name:"color"}},display:{value:"block"},zIndex:{value:0}});dm.View.setSlots({init:function(){dm.Delegator.init.call(this);this.setEventListeners({});this.setStyleSlots(this.styleSlots().copy());this.createElement();this.initElement();this.setSubviews(this.subviews().copy())},domReady:function(){return dm.Window.inited()},createElement:function(){var a=document.createElement(this.elementName());a.style.position="absolute";a.style.overflow="hidden";a._dmView=this;this.setElement(a)},elementId:function(){return this.type()+"."+this.uniqueId()},initElement:function(){var a=this;this.element().id=this.elementId();this.styleSlots().forEach(function(b){a.perform("set"+b.name().asCapitalized(),a.perform(b.name()))});this.element().style.borderStyle="solid"},setBorderThickness:function(a){return this.performSets({leftBorderThickness:a,rightBorderThickness:a,topBorderThickness:a,bottomBorderThickness:a})},setPaddingThickness:function(a){return this.performSets({verticalPaddingThickness:a,horizontalPaddingThickness:a})},setVerticalPaddingThickness:function(a){return this.performSets({topPaddingThickness:a/2,bottomPaddingThickness:a/2})},setHorizontalPaddingThickness:function(a){return this.performSets({leftPaddingThickness:a/2,rightPaddingThickness:a/2})},setTracksMouse:function(a){this._tracksMouse=a;var c=this.element();if(a){var b=this;c.onmouseover=function(d){if((b.element()==d.fromElement)||b.detectAncestorView(function(e){return e.element()==d.fromElement})){return}b.delegatePerform("mouseEntered",dm.Window.viewWithElement(d.fromElement))};c.onmouseout=function(d){if((b.element()==d.toElement)||b.detectAncestorView(function(e){return e.element()==d.toElement})){return}b.delegatePerform("mouseExited",dm.Window.viewWithElement(d.toElement))}}else{delete c.onmouseover;delete c.onmouseout}},viewWithElement:function(a){return this.detectAncestorView(function(b){return b.element()==a})},contains:function(a){return(a==this)||this.detectAncestorView(function(b){return b==a})},detectAncestorView:function(c){for(var b=0;b<this.subviews().length;b++){var a=this.subviews()[b];if(c(a)){return a}else{var d=a.detectAncestorView(c);if(d){return d}}}return null},width:function(){return this.cssWidth()+this.leftBorderThickness()+this.rightBorderThickness()+this.leftPaddingThickness()+this.rightPaddingThickness()},setWidth:function(b){var a=this.width();this.setCssWidth(b-this.leftBorderThickness()-this.rightBorderThickness()-this.leftPaddingThickness()-this.rightPaddingThickness());this.subviews().forEachPerform("autoResizeWidth",a);return this},height:function(){return this.cssHeight()+this.topBorderThickness()+this.bottomBorderThickness()+this.topPaddingThickness()+this.bottomPaddingThickness()},setHeight:function(a){var b=this.height();this.setCssHeight(a-this.topBorderThickness()-this.bottomBorderThickness()-this.topPaddingThickness()-this.bottomPaddingThickness());this.subviews().forEachPerform("autoResizeHeight",b);if(b!=a){if(this.superview()&&this.superview().canPerform("heightChanged")){this.superview().subviewHeightChanged(this)}this.delegatePerform("heightChanged")}return this},size:function(){return dm.Point.withXY(this.width(),this.height())},setSize:function(a){return this.performSets({width:a.x(),height:a.y()})},isLandscape:function(){return this.size().isLandscape()},aspectRatio:function(){return this.size().aspectRatio()},setHidden:function(a){this._hidden=a;this.setDisplay(a?"none":"block")},hidden:function(){return this.display()=="none"},show:function(){this.setHidden(false);return this},hide:function(){this.setHidden(true);return this},addEventListener:function(a,b){if(!this._eventListeners[a]){this._eventListeners[a]=[]}this._eventListeners[a].append(b);var c=this.element();if(c.addEventListener){c.addEventListener(a,b,false)}else{c.attachEvent(a,b)}},removeEventListener:function(a,b){var c=this.element();if(c.removeEventListener){c.removeEventListener(a,b)}else{c.detachEvent(a,b)}},removeEventListeners:function(b){var c=this._eventListeners[b];if(c){var a=this;c.forEach(function(d){a.removeEventListener(b,d)})}},preventDefault:function(a){if(a.preventDefault){a.preventDefault()}else{if(a.returnValue){a.returnValue=false}}},removeSubview:function(a){if(!a){return this}if(a.superview()!=this){throw"view is not a subview"}this.subviews().remove(a);a.setSuperview(null);this.element().removeChild(a.element())},removeAllSubviews:function(){var a=this;this.subviews().copy().forEach(function(b){a.removeSubview(b)})},removeFromSuperview:function(){if(this.superview()){this.superview().removeSubview(this)}return this},addSubview:function(a){this.insertSubviewAt(a,this.subviews().length);return this},insertSubviewAt:function(d,b){var c=d.superview();if(c){c.removeSubview(d)}d.setSuperview(this);var a=this.subviews()[b];if(a){this.subviews().atInsert(b,d);this.element().insertBefore(d.element(),a.element())}else{this.subviews().append(d);this.element().appendChild(d.element())}d.conditionallyPerform("superviewChanged")},addToView:function(a){a.addSubview(this);return this},addSubviews:function(){var a=this;dm.Arguments_asArray(arguments).forEach(function(b){a.addSubview(b)})},rightEdge:function(){return this.x()+this.width()},bottomEdge:function(){return this.y()+this.height()},moveLeftOf:function(a,b){b=b||0;this.setX(a.x()-b-this.width());return this},moveRightOf:function(a,b){b=b||0;this.setX(a.rightEdge()+b);return this},moveAbove:function(a,b){b=b||0;this.setY(a.y()-this.height()-b)},moveBelow:function(a,b){b=b||0;this.setY(a.bottomEdge()+b);return this},alignTopTo:function(a){this.setY(a.y())},alignMiddleTo:function(a){this.setY(a.y()+0.5*a.height()-0.5*this.height());return this},alignBottomTo:function(a){this.setY(a.bottomEdge()-this.height()-1)},alignLeftTo:function(a){this.setX(a.x())},alignRightTo:function(a){this.setX(a.rightEdge()-this.width()-1)},centerXOver:function(a){this.setX(a.x()+(a.width()-this.width())/2);return this},centerYOver:function(a){return this.setY(a.y()+(a.height()-this.height())/2)},centerOver:function(a){this.centerXOver(a);this.centerYOver(a);return this},center:function(){this.centerHorizontally();this.centerVertically();return this},centerHorizontally:function(){var a=this.superview();if(a){this.setX((a.width()-this.width())/2)}return this},centerVertically:function(){this.centerVerticallyInView(this.superview())},centerVerticallyInView:function(a){if(a){this.setY((a.height()-this.height())/2)}},moveToBottom:function(a){if(this.superview()){a=a||0;this.setY(this.superview().height()-this.height()-a)}},moveToRight:function(a){if(this.superview()){a=a||0;this.setX(this.superview().width()-this.width()-a)}return this},moveLeft:function(a){return this.setX(this.x()-a)},moveRight:function(a){return this.setX(this.x()+a)},moveDown:function(a){return this.setY(this.y()+a)},moveUp:function(a){return this.setY(this.y()-a)},growWidth:function(a){return this.setWidth(this.width()+a)},growHeight:function(a){return this.setHeight(this.height()+a)},autoResizeWidth:function(c){if(!this.autoResizes()||!this.superview()){return}var b=this.superview().width();var a=this.width();if(this.resizesLeft()){if(this.resizesRight()){if(this.resizesWidth()){this.setWidth(a*b/c)}this.setX(this.x()*(b-this.width())/(c-a))}else{if(this.resizesWidth()){this.setWidth(a*b/c)}this.setX(this.x()+a+b-this.width()-c)}}else{if(this.resizesRight()){if(this.resizesWidth()){this.setWidth(a*b/c)}}else{if(this.resizesWidth()){this.setWidth(b-(c-a))}}}},autoResizeHeight:function(c){if(!this.autoResizes()||!this.superview()){return}var a=this.superview().height();var b=this.height();if(this.resizesTop()){if(this.resizesBottom()){if(this.resizesHeight()){this.setHeight(b*a/c)}this.setY(this.y()*(a-this.height())/(c-b))}else{if(this.resizesHeight()){this.setHeight(b*a/c)}this.setY(this.y()+b+a-this.height()-c)}}else{if(this.resizesBottom()){if(this.resizesHeight()){this.setHeight(b*a/c)}}else{if(this.resizesHeight()){this.setHeight(a-(c-b))}}}},autoResize:function(b,a){this.autoResizeWidth(b);this.autoResizeHeight(a)},resizeCentered:function(){this.resizeCenteredHorizontally();this.resizeCenteredVertically();return this},resizeCenteredHorizontally:function(){this.setResizesLeft(true);this.setResizesRight(true)},resizeCenteredVertically:function(){this.setResizesTop(true);this.setResizesBottom(true)},resizeToFill:function(){this.setResizesWidth(true);this.setResizesHeight(true);return this},scaleToFitSuperview:function(){var a=this.superview();if(a){this.scaleToFitSize(a.size())}},scaleToFitSize:function(a){this.setSize(this.size().scaleToFitPoint(a));return this},scaleFrameBy:function(a){this.setX(this.x()*a);this.setY(this.y()*a);this.setWidth(this.width()*a);this.setHeight(this.height()*a)},sizingElement:function(){var b=this.element().cloneNode(true);var a=b.style;a.display="block";a.position="fixed";a.width="";a.height="";a.top=screen.height+"px";document.body.appendChild(b);return b},sizeWidthToFit:function(){var b=this.sizingElement();var a=b.style;this.setWidth(b.offsetWidth+(this.width()-this.cssWidth()));document.body.removeChild(b);return this},sizeHeightToFit:function(){var b=this.sizingElement();var a=b.style;a.width=this.width()+"px";this.setHeight(b.offsetHeight+(this.height()-this.cssHeight()));document.body.removeChild(b);return this},sizeToFit:function(){this.sizeWidthToFit();this.sizeHeightToFit();return this},sizeWidthToFitSubviews:function(){return this.setWidth(this.subviews().mapPerform("rightEdge").max()+1)},sizeHeightToFitSubviews:function(){return this.setHeight(this.subviews().mapPerform("bottomEdge").max()+1)},sizeToFitSubviews:function(){this.sizeWidthToFitSubviews();this.sizeHeightToFitSubviews();return this},stackSubviewsHorizontally:function(b){b=b||0;var a=b;this.subviews().forEach(function(c){c.setX(a);a=c.rightEdge()+b})},stackSubviewsVertically:function(a){a=a||0;var b=a;this.subviews().forEach(function(c){c.setY(b);b=c.bottomEdge()+a})},moveSubviewsIntoView:function(){var b=Math.min(this.subviews().mapPerform("x").min(),0).abs();var a=Math.min(this.subviews().mapPerform("y").min(),0).abs();this.subviews().forEach(function(c){c.setX(c.x()+b);c.setY(c.y()+a)});return this},moveToBack:function(){if(this.superview()){this.setZIndex(this.superview().subviews().mapPerform("zIndex").min()-1)}},setZIndexToMax:function(){this.setZIndex(2147483647);return this},fadeOut:function(d){d=d||1000;var e=new Date();var b=this;var c=this.element().style.opacity;var a=setInterval(function(){var f=new Date().getTime()-e.getTime();b.element().style.opacity=1-(f/d);if(f>=d){b.delegatePerform("fadedOut");clearInterval(a);b.hide();b.element().style.opacity=c}},1000/60)},setDraggable:function(a){var b=this;this._draggable=a;if(a){this.element().style.setProperty("pointer-events","all");this._dragMouseDownListner=function(c){b.beginDrag(c)};this.addEventListener("mousedown",this._dragMouseDownListner)}else{this.element().style.removeProperty("pointer-events");this.removeEventListener("mousedown",this._draggableListener);this.endDrag()}return this},beginDrag:function(b){if(!dm.View._dragView){b.preventDefault();b.stopPropagation();this._lastDragEvent=b;dm.View._dragView=this;var a=this;this._dragMouseMoveListener=function(c){a.moveDrag(c)};this._dragMouseUpListener=function(c){a.endDrag(c)};dm.Window.addEventListener("mousemove",this._dragMouseMoveListener);dm.Window.addEventListener("mouseup",this._dragMouseUpListener)}},moveDrag:function(a){a.preventDefault();a.stopPropagation();if(this._lastDragEvent){this.setX(this.x()+a.screenX-this._lastDragEvent.screenX);this.setY(this.y()+a.screenY-this._lastDragEvent.screenY);this._lastDragEvent=a}},endDrag:function(a){a.preventDefault();a.stopPropagation();delete dm.View._dragView;if(this._lastDragEvent){this.setX(this.x()+a.screenX-this._lastDragEvent.screenX);this.setY(this.y()+a.screenY-this._lastDragEvent.screenY);this._lastDragEvent=a}delete this._lastDragEvent;dm.Window.removeEventListener("mousemove",this._dragMouseMoveListener);dm.Window.removeEventListener("mouseup",this._dragMouseUpListener)},draggable:function(){return this._draggable}});dm.Window=dm.View.clone().newSlots({type:"dm.Window",lastResizeWidth:null,lastResizeHeight:null,inited:false,containerElement:null,clearsElement:true}).setSlots({init:function(){dm.View.init.call(this);if(this.clearsElement()){this.element().innerHTML=""}this.setLastResizeWidth(this.width());this.setLastResizeHeight(this.height());window.onresize=function(){dm.Window.autoResize()};var a=this;window.onmessage=function(b){a.delegatePerform("messagedFrom",b.data,b.origin)};this.setInited(true);this.delegatePerform("inited")},startResizeInterval:function(){if(!this._resizeTimer){var a=this;this._resizeTimer=setInterval(function(){if(a.width()!=a.lastResizeWidth()||a.height()!=a.lastResizeHeight()){a.autoResize()}},200)}},createElement:function(){if(this.containerElement()){this.setElement(this.containerElement())}else{this.setElement(document.body)}},initElement:function(){},width:function(){if(this.element()==document.body){return window.innerWidth}else{return this.element().clientWidth}},height:function(){if(this.element()==document.body){return window.innerHeight}else{return this.element().clientHeight}},autoResize:function(){this.subviews().forEachPerform("autoResize",this.lastResizeWidth(),this.lastResizeHeight());this.setLastResizeWidth(this.width());this.setLastResizeHeight(this.height())},windowLoaded:function(){dm.Window.init()}});window.addEventListener("load",dm.Window.windowLoaded);dm.Label=dm.View.clone().newSlots({type:"dm.Label",text:null}).newStyleSlots({fontFamily:{value:"Helvetica, Arial, sans-serif"},fontSize:{value:15,transformation:{name:"suffix",suffix:"px"}},fontWeight:{value:"normal"},textDecoration:{value:"none"},color:{value:dm.Color.Black,transformation:{name:"color"}},textOverflow:{value:"ellipsis"},whiteSpace:{value:"pre"},textAlign:{value:"left"},lineHeight:{value:""}}).setSlots({setText:function(a){this._text=a;this.element().innerText=a;return this},setValue:function(a){return this.setText(a)}});dm.NativeControl=dm.View.clone().newSlots({type:"dm.NativeControl"}).setSlots({initElement:function(){dm.View.initElement.call(this);var a=this.element();a.style.border="";a.style.margin="";a.style.padding=""}});dm.TextField=dm.Label.clone().newSlots({type:"dm.TextField",elementName:"input",placeholderText:"Enter Text",placeholderTextColor:dm.Color.Gray,growsToFit:false}).setSlots({initElement:function(){dm.NativeControl.initElement.call(this);var b=this.element();b.type="text";var a=this;b.onkeydown=function(c){if(c.keyCode==13){a.preventDefault(c);a.element().blur()}a.checkChanged()};b.onpaste=function(c){a.checkChanged()};b.onmouseup=function(c){a.checkChanged()};b.onfocus=function(c){if(a._originalColor){a.setColor(a._originalColor)}setTimeout(function(){a.selectAll()})};b.onblur=function(c){a.setText(a.text());if(!(a.delegate()&&a.delegate().canPerform(a.delegateMessageName("shouldEndEditing")))||a.delegatePerform("shouldEndEditing")){a.delegatePerform("editingEnded",a)}else{setTimeout(function(){a.focus();a.selectAll()})}};this.setText(this.text())},sizingElement:function(){var f=document.createElement("div");var b=this.element().cloneNode(true);document.body.appendChild(b);var a=window.getComputedStyle(b);for(var d=a.length-1;d>-1;d--){var c=a[d];f.style.setProperty(c,a.getPropertyValue(c))}document.body.removeChild(b);f.style.display="block";f.style.position="fixed";f.style.width="";f.style.height="";f.style.top=screen.height+"px";if(this.text()==""){f.innerText=this.placeholderText()||" "}else{f.innerText=this.text()}document.body.appendChild(f);return f},width:function(){var a=window.getComputedStyle(this.element());return this.cssWidth()+parseFloat(a.getPropertyValue("padding-left")||0)+parseFloat(a.getPropertyValue("padding-right")||0)+parseFloat(a.getPropertyValue("border-left-width")||0)+parseFloat(a.getPropertyValue("border-right-width")||0)+2},height:function(){var a=window.getComputedStyle(this.element());return this.cssHeight()+parseFloat(a.getPropertyValue("padding-top")||0)+parseFloat(a.getPropertyValue("padding-bottom")||0)+parseFloat(a.getPropertyValue("border-top-width")||0)+parseFloat(a.getPropertyValue("border-bottom-width")||0)},checkChanged:function(){var a=this;setTimeout(function(){if(a.text()!=a._lastText){a._lastText=a.text();if(a.growsToFit()){a.sizeToFit()}a.changed()}})},changed:function(){this.delegatePerform("changed")},setText:function(a){if(a.strip()==""){if(!this._originalColor){this._originalColor=this.color()}this.setColor(this.placeholderTextColor());this.element().value=this.placeholderText()}else{if(this._originalColor){this.setColor(this._originalColor);delete this._originalColor}else{this.setColor(dm.TextField.color())}this.element().value=a}this.checkChanged();return this},text:function(){var a=this.element().value;if(a==this.placeholderText()){return""}else{return a}},setPlaceholderText:function(a){var b=this.text();this._placeholderText=a;this.setText(b);return this},selectAll:function(){this.element().select()},focus:function(){this.element().focus()},value:function(){return this.text()},setValue:function(a){this.setText(a||"")}});dm.TextArea=dm.NativeControl.clone().newSlots({type:"dm.TextArea",elementName:"textarea"}).setSlots({initElement:function(){dm.NativeControl.initElement.call(this);var b=this.element();b.style.margin="";b.style.padding="";var a=this;b.onblur=function(c){a.delegatePerform("editingEnded",a)}},setText:function(a){this.element().value=a;return this},text:function(){return this.element().value},selectAll:function(){this.element().select()},focus:function(){this.element().focus()},value:function(){return this.text()},setValue:function(a){this.setText(a)}});dm.Button=dm.Label.clone().newSlots({type:"dm.Button"}).setSlots({initElement:function(){dm.View.initElement.call(this);this.setTextAlign("center");var a=this;var b=this.element();b.onclick=function(c){a.delegatePerform("clicked",c)};b.style.cursor="pointer"},disable:function(){this.setColor(this.color().setAlpha(0.5));this.setMessagesDelegate(false)},enable:function(){this.setColor(this.color().setAlpha(1));this.setMessagesDelegate(true)},simulateClick:function(){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);this.element().dispatchEvent(a)}});dm.CheckBox=dm.NativeControl.clone().newSlots({type:"dm.CheckBox",elementName:"input",checked:false}).setSlots({init:function(){dm.NativeControl.init.call(this);this.sizeToFit()},initElement:function(){dm.View.initElement.call(this);var a=this;var b=this.element();b.type="checkbox";b.onclick=function(c){a.setChecked(a.element().checked)}},setChecked:function(a){if(this.checked()!=a){this._checked=a;this.element().checked=a;this.delegatePerform("changed")}},toggleChecked:function(){this.setChecked(!this.checked())},sizeWidthToFit:function(){dm.View.sizeWidthToFit.call(this);this.setWidth(this.width()+2);return this},sizeHeightToFit:function(){dm.View.sizeHeightToFit.call(this);this.setHeight(this.height()+2);return this},value:function(){return this.checked()},setValue:function(a){this.setChecked(a)}});dm.DropDown=dm.NativeControl.clone().newSlots({type:"dm.DropDown",elementName:"select",}).setSlots({initElement:function(){dm.NativeControl.initElement.call(this);var a=this;var b=this.element();b.onchange=function(c){a.delegatePerform("changed")}},setOptions:function(a){var b=this.element();b.innerHTML="";a.forEach(function(d){var c=document.createElement("option");c.value=d;c.innerText=d;select=b;b.appendChild(c)})},selectedOption:function(){var a=Array.prototype.slice.call(this.element().options).detect(function(b){return b.selected});return a&&a.value},setSelectedOption:function(a){Array.prototype.slice.call(this.element().options).forEach(function(b){b.selected=b.value==a?"selected":""})},value:function(){return this.selectedOption()},setValue:function(a){this.setSelectedOption(a)}});dm.ScrollView=dm.View.clone().newSlots({type:"dm.ScrollView",contentView:null}).setSlots({init:function(){dm.View.init.call(this);this.setContentView(dm.View.clone())},initElement:function(){dm.View.initElement.call(this);this.element().style.overflow="auto"},setContentView:function(a){if(this._contentView){this._contentView.removeFromSuperview()}this.addSubview(a);this._contentView=a;return this},scrollToBottom:function(){this.element().scrollTop=this.contentView().height()-this.height()},scrollToTop:function(){this.element().scrollTop=0}});dm.TitledView=dm.View.clone().newSlots({type:"dm.TitledView",title:"",titleBar:null,contentView:null}).setSlots({init:function(){dm.View.init.call(this);if(dm.Window.inited()){var c=dm.Label.clone();c.setText("Title Bar");c.sizeToFit();c.resizeCentered();var b=dm.View.clone();b.setBackgroundColor(dm.Color.LightGray);b.setWidth(c.width()+c.fontSize());b.setHeight(c.height()+c.fontSize());b.setResizesWidth(true);b.addSubview(c);b.newSlot("label",c);c.center();this.setTitleBar(b);var d=dm.View.clone();d.setWidth(b.width());d.setHeight(1);d.setY(b.height());d.setResizesWidth(true);d.setResizesHeight(true);this.setContentView(d);this.setWidth(b.width());this.setHeight(b.height()+d.height());var e=dm.View.clone();e.setBackgroundColor(dm.Color.Gray);e.setY(b.height());e.setWidth(b.width());e.setHeight(1);e.setResizesWidth(true);var a=dm.View.clone();a.setBackgroundColor(dm.Color.Gray);a.setX(this.width()-1);a.setWidth(1);a.setHeight(this.height());a.setResizesLeft(true);a.setResizesHeight(true);this.addSubview(b);this.addSubview(e);this.addSubview(d);this.addSubview(a)}},setTitle:function(b){var a=this.titleBar().label();a.setText(b);a.sizeToFit();a.center();this._title=b}});dm.TableView=dm.View.clone().newSlots({type:"dm.TableView",rows:[],vMargin:8,hMargin:10,colAlignments:[],rowAlignments:[],sectionName:null,lastSectionName:null}).setSlots({init:function(){dm.View.init.call(this);this.setRows(this.rows().copy());this.setRowAlignments(this.rowAlignments().copy());this.setColAlignments(this.colAlignments().copy())},ColAlignmentLeft:"left",ColAlignmentCenter:"center",ColAlignmentRight:"right",RowAlignmentTop:"top",RowAlignmentMiddle:"middle",RowAlignmentBottom:"bottom",row:function(b){var a=this.rows()[b];if(!a){a=[];this.rows()[b]=a}return a},addAtRowCol:function(d,e,a){var c=this.sectionName();if(c&&(c!=this.lastSectionName())){var j=dm.View.clone().performSets({width:this.width(),height:64,resizesWidth:true}).addToView(this);var g=dm.Label.clone().performSets({text:c,fontSize:18,y:16}).sizeToFit().addToView(j);var b=dm.View.clone().performSets({height:1,width:j.width(),resizesWidth:true,backgroundColor:dm.Color.LightGray}).addToView(j).moveBelow(g,8);d._sectionView=j;this.setLastSectionName(c)}var i=this.rows();var h=this.row(e);var f=h[a];if(f){this.removeAtRowCol(e,a)}h[a]=d;this.addSubview(d);this.applyLayout()},removeAtRowCol:function(d,b){var c=this.row(d);var a=c[b];if(a){this.removeSubview(a);c[d][b]=null}this.applyLayout()},empty:function(){this.setSectionName(null);this.setLastSectionName(null);this.setRows([]);this.removeAllSubviews()},viewAtRowCol:function(b,a){return this.row(b)[a]},colCount:function(){return this.rows().map(function(a){return(a&&a.length)||0}).max()||0},colWidth:function(a){return this.rows().map(function(b){return(b[a]||dm.View.clone()).width()}).max()||0},rowCount:function(){return this.rows().length},rowHeight:function(b){var a=this.rows()[b].map(function(c){return(c||dm.View.clone()).height()}).max();return a},alignRow:function(a,b){this.rowAlignments()[a]=b},alignCol:function(a,b){this.colAlignments()[a]=b},rowAlignment:function(a){return this.rowAlignments()[a]||this.defaultRowAlignment()},colAlignment:function(a){return this.colAlignments()[a]||this.defaultColAlignment()},applyLayout:function(){var j=this;var k=j.colCount().map(function(o){return j.colWidth(o)});var n=this.rows();var h=this.vMargin();for(var b=0;b<this.rowCount();b++){var m=n[b];var e=this.rowAlignment(b);var d=h;for(var f=0;f<this.colCount();f++){var g=this.colAlignment(f);var i=this.viewAtRowCol(b,f);if(i){var a=this.hMargin()+f*this.hMargin()+f.map(function(o){return k[o]}).sum();if(g==dm.TableView.ColAlignmentLeft){i.setX(a)}else{if(g==dm.TableView.ColAlignmentCenter){i.setX(a+(this.colWidth(f)-i.width())/2)}else{i.setX(a+this.colWidth(f)-i.width())}}var l=i._sectionView;if(l){l.setY(h);h=l.bottomEdge()}if(e==dm.TableView.RowAlignmentTop){i.setY(h)}else{if(e==dm.TableView.RowAlignmentMiddle){i.setY(h+(this.rowHeight(b)-i.height())/2)}else{i.setY(h+this.rowHeight(b)-i.height())}}d=Math.max(d,i.bottomEdge()+this.vMargin())}}h=d}this.setWidth(k.sum()+this.hMargin()*(k.length+1));this.setHeight(h);return this}});dm.TableView.newSlots({defaultColAlignment:dm.TableView.ColAlignmentCenter,defaultRowAlignment:dm.TableView.RowAlignmentMiddle});dm.VerticalListContentView=dm.View.clone().newSlots({type:"dm.VerticalListContentView",items:[],selectedItemIndex:null,itemHMargin:15,itemVMargin:15,confirmsRemove:true,closeButton:null,}).setSlots({init:function(){dm.View.init.call(this);this.setItems(this.items().copy());if(dm.Window.inited()){var a=dm.ImageButton.clone().newSlot("itemView",null);this.setCloseButton(a);a.setDelegate(this);a.setDelegatePrefix("closeButton");a.setImageUrl("http://f.cl.ly/items/3P3Y2Z2B31222w0l1K0E/gray-close.png");a.setWidth(12);a.setHeight(12);a.setX(this.width()-a.width()-a.width()/2);a.setResizesLeft(true);a.setZIndex(1);a.hide();this.addSubview(a)}},addItemWithText:function(e){var b=dm.VerticalListContentView.itemHMargin();var d=dm.VerticalListContentView.itemVMargin();var c=dm.Button.clone().newSlots({type:"dm.ItemView",label:null}).clone();c.setTracksMouse(true);c.setDelegate(this);c.setWidth(this.width());c.setResizesWidth(true);var a=dm.Label.clone();c.setLabel(a);a.setColor(dm.Color.Gray);a.setText(e);a.setWidth(this.width()-b-2*this.closeButton().width());a.sizeHeightToFit();a.setX(b);c.setHeight(a.height()+b);c.addSubview(a);c.addSubview(a);a.centerVertically();this.addItem(c)},itemViewMouseEntered:function(b,c){if(!this.closeButton().contains(c)){var a=this.closeButton();a.centerYOver(b);a.moveDown(1);a.show();a.setItemView(b)}},itemViewMouseExited:function(b,c){if(!this.closeButton().contains(c)){var a=this.closeButton();a.hide();a.setItemView(null)}},itemViewClicked:function(b){if(this.selectedItemIndex()!==null){var c=this.selectedItem();if(c){var a=c.label();a.setColor(dm.Color.Gray);a.setFontWeight("normal")}}var a=b.label();a.setColor(dm.Color.Black);a.setFontWeight("bold");this.setSelectedItemIndex(this.items().indexOf(b));this.delegatePerform("selectedItem",b)},addItem:function(b){var a=dm.VerticalListContentView.itemHMargin();b.setY(this.items().length*b.height());this.setHeight(b.bottomEdge());this.addSubview(b);this.items().append(b)},removeLastItem:function(){var a=this.items().pop();this.removeSubview(a);this.setHeight(this.height()-a.height())},selectItem:function(a){this.itemViewClicked(a)},removeItem:function(c){if(this.confirmsRemove()){if(!confirm("Remove "+c.label().text()+"?")){return}}var e=this.selectedItem();var b=this.items().indexOf(c);this.items().remove(c);this.items().slice(b).forEach(function(f){f.setY(f.y()-c.height())});this.removeSubview(c);this.setHeight(this.height()-c.height());if(e==c){var d=this.items()[b]||this.items().last();if(d){this.selectItem(d)}}var a=this.items()[b];if(a){this.itemViewMouseEntered(a,null)}this.delegatePerform("removedItem",c)},closeButtonClicked:function(a){this.removeItem(a.itemView())},selectedItem:function(){return this.items()[this.selectedItemIndex()]},removeSelectedItem:function(){this.removeItem(this.selectedItem())}});dm.VerticalListView=dm.TitledView.clone().newSlots({type:"dm.VerticalListView",scrollView:null,controlsView:null,addButton:null,defaultItemText:"New Item",allowsItemEditing:false}).setSlots({init:function(){dm.TitledView.init.call(this);if(dm.Window.inited()){var f=dm.Button.clone();f.setFontWeight("bold");f.setText("+");f.setColor(dm.Color.DimGray);f.sizeToFit();f.setX(f.fontSize());f.setY(f.fontSize()/2);f.setDelegate(this,"addButton").setDelegatePrefix("addButton");this.setAddButton(f);var b=Math.max(f.width()+f.fontSize(),this.titleBar().width());var g=dm.VerticalListContentView.clone();g.setWidth(b);g.setResizesWidth(true);g.setDelegate(this);g.setDelegatePrefix("vlcv");var e=dm.ScrollView.clone();e.setWidth(b);e.setHeight(1);e.setResizesHeight(true);e.setResizesWidth(true);e.setContentView(g);this.setScrollView(e);var d=dm.View.clone();d.setBackgroundColor(dm.Color.LightGray);d.setY(e.height());d.setWidth(b);d.setHeight(f.height()+0.5*f.fontSize());d.setResizesWidth(true);d.setResizesTop(true);this.setControlsView(d);var a=dm.View.clone();a.setBackgroundColor(dm.Color.Gray);a.setY(d.y()-1);a.setWidth(b);a.setHeight(1);a.setResizesTop(true);a.setResizesWidth(true);this.setWidth(b);this.setHeight(this.titleBar().height()+e.height()+d.height());var c=this.contentView();c.addSubview(e);c.addSubview(d);c.addSubview(a);c.addSubview(f);this.updateButtons()}},addButtonClicked:function(){if(this.allowsItemEditing()){var d=dm.VerticalListContentView.itemHMargin();var f=dm.VerticalListContentView.itemVMargin();var b=dm.TextField.clone();b.setText(this.defaultItemText());b.setWidth(this.width()-2*d);b.sizeHeightToFit();b.setX(d);b.setDelegate(this);var e=dm.View.clone();e.setWidth(this.width());e.setHeight(b.height()+f);e.addSubview(b);b.centerVertically();var a=this.scrollView();var c=a.contentView();c.addItem(e);this.scrollView().scrollToBottom();b.focus();b.selectAll();if(!this.shouldDockButton()){this.addButton().setHidden(true)}}else{this.vlcv().addItemWithText(this.defaultItemText());this.selectLastItem()}},vlcv:function(){return this.scrollView().contentView()},textFieldShouldEndEditing:function(a){return !(this.delegate()&&this.delegate().canPerform(this.delegateMessageName("shouldAddItemWithText")))||this.delegatePerform("shouldAddItemWithText",a.text())},textFieldEditingEnded:function(a){var b=this.scrollView().contentView();b.removeLastItem();b.addItemWithText(a.text());b.itemViewClicked(b.items().last());this.scrollView().scrollToBottom()},shouldDockButton:function(){return(this.scrollView().contentView().height()+this.addButton().height())>this.scrollView().height()},updateButtons:function(){if(this.shouldDockButton()){this.addButton().setY(this.scrollView().height()+this.controlsView().height()/2-this.addButton().height()/2-2);this.addButton().setResizesTop(true);this.addButton().setResizesBottom(false)}else{var a=this.scrollView().contentView().height();if(a==0){a=8}this.addButton().setY(a);this.addButton().setResizesTop(false);this.addButton().setResizesBottom(true)}this.addButton().setHidden(false)},setHeight:function(a){dm.TitledView.setHeight.call(this,a);if(this.scrollView()){this.updateButtons()}return this},vlcvSelectedItem:function(b,a){this.updateButtons();this.delegatePerform("vlvSelectedItem",a)},vlcvRemovedItem:function(b,a){this.updateButtons();this.delegatePerform("removedItem",a)},selectFirstItem:function(){var b=this.scrollView().contentView();var a=b.items().first();if(a){b.selectItem(a)}},selectLastItem:function(){var a=this.vlcv();a.selectItem(a.items().last());this.scrollView().scrollToBottom()},selectItemWithTitle:function(c){var b=this.scrollView().contentView();var a=b.items().detect(function(d){return d.label().text()==c});if(a){b.selectItem(a)}},cancelAdd:function(){this.addButton().setHidden(false);this.scrollView().contentView().removeLastItem()},isEmpty:function(){return this.vlcv().items().length==0},empty:function(){this.vlcv().removeAllSubviews();this.vlcv().setWidth(0);this.vlcv().setHeight(0);this.scrollView().scrollToTop()}});dm.ImageView=dm.View.clone().newSlots({type:"dm.ImageView",loadState:"init",url:null,elementName:"img"}).setSlots({initElement:function(){dm.View.initElement.call(this);var b=this.element();var a=this;b.onload=function(){a.loaded()}},setUrl:function(a){this._url=a;this.element().src=a;return this},loaded:function(){this.setLoadState("load");this.delegatePerform("loaded")},hasLoaded:function(){return this.loadState()=="load"},sizeToFit:function(){return this.setWidth(this.naturalWidth()).setHeight(this.naturalHeight())},naturalWidth:function(){return this.element().naturalWidth},naturalHeight:function(){return this.element().naturalHeight},naturalSize:function(){return dm.Point.withXY(this.naturalWidth(),this.naturalHeight())}});dm.BorderedButton=dm.Button.clone().newSlots({type:"dm.BorderedButton",borderImageUrl:null,borderImage:null,leftBorderWidth:0,rightBorderWidth:0,topBorderWidth:0,bottomBorderWidth:0,}).setSlots({setBorderImageUrl:function(b){var a=new Image();a.src=b;this.setBorderImage(a);this._borderImageUrl=b;this.updateStyle();return this},setLeftBorderWidth:function(a){this._leftBorderWidth=a;this.updateStyle();return this},setRightBorderWidth:function(a){this._rightBorderWidth=a;this.updateStyle();return this},setTopBorderWidth:function(a){this._topBorderWidth=a;this.updateStyle();return this},setBottomBorderWidth:function(a){this._bottomBorderWidth=a;this.updateStyle();return this},setWidth:function(a){this.setCssWidth(a);this.updateStyle();return this},setHeight:function(a){this.setCssHeight(a);this.updateStyle();return this},sizeWidthToFit:function(){dm.Button.sizeWidthToFit.call(this);w=this.width()+Math.max(this.leftBorderWidth()+this.rightBorderWidth(),2*this.fontSize());this.setWidth(w)},updateStyle:function(){var b=this.element().style;var c=[this.topBorderWidth(),this.rightBorderWidth(),this.bottomBorderWidth(),this.leftBorderWidth()];var d="url("+this.borderImageUrl()+") "+c.join(" ");b.setProperty("-webkit-border-image",d);b.setProperty("-o-border-image",d);c=c.map(function(e){return e+"px"});b.borderWidth=c.join(" ");b.width=(this.width()-this.leftBorderWidth()-this.rightBorderWidth())+"px";var a=(this.height()-this.topBorderWidth()-this.bottomBorderWidth());b.height=a+"px";b.lineHeight=a+"px"}});dm.ImageButton=dm.Button.clone().newSlots({type:"dm.ImageButton",imageUrl:null,imageView:null}).setSlots({init:function(){dm.Button.init.call(this);this.setWidth(3);this.setHeight(3);var a=dm.ImageView.clone();a.setDelegate(this);a.setDelegatePrefix("imageView");a.setWidth(3);a.setHeight(3);a.resizeToFill();this.setImageView(a);this.addSubview(a)},setImageUrl:function(a){this.imageView().setUrl(a)},imageViewLoaded:function(){this.delegatePerform("loaded")},sizeToFit:function(){this.setSize(this.imageView().naturalSize());this.imageView().setSize(this.imageView().naturalSize());return this}});dm.VideoView=dm.View.clone().newSlots({type:"dm.VideoView",url:null,nativeWidth:null,nativeHeight:null,duration:null,elementName:"video",inline:false,autoplay:false,canPlay:false}).setSlots({initElement:function(){dm.View.initElement.call(this);var a=this;var b=this.element();b.style.pointerEvents="none";this.addEventListener("canplay",function(){a.setCanPlay(true);a.delegatePerform("canPlay")});this.addEventListener("loadeddata",function(){a.delegatePerform("loadedData")});this.addEventListener("timeupdate",function(){a.delegatePerform("advanced")});this.addEventListener("pause",function(){a.delegatePerform("paused")});this.addEventListener("ended",function(){a.delegatePerform("ended")});this.addEventListener("loadedmetadata",function(){a.loadedMetaData()});this.addEventListener("error",function(){a.delegatePerform("error")})},loadedMetaData:function(){var a=this.element();this.setNativeWidth(a.videoWidth);this.setNativeHeight(a.videoHeight);this.setDuration(a.duration);this.delegatePerform("loadedMetaData")},setUrl:function(a){this._url=a;return this},currentTime:function(){return this.element().currentTime},setCurrentTime:function(a){return this.element().currentTime=a},setInline:function(a){this._inline=a;if(a){this.element().setAttribute("webkit-playsinline","")}else{this.element().removeAttribute("webkit-playsinline")}return this},setAutoplay:function(a){this._autoplay=a;if(a){this.element().setAttribute("autoplay","")}else{this.element().removeAttribute("autoplay")}},load:function(){this.element().src=this.url();this.setCanPlay(false);this.element().load()},play:function(){this.element().play()},pause:function(){this.element().pause()},mute:function(){this.element().muted=true},scaling:function(){return this.width()/this.nativeWidth()}});dm.ProgressIndicatorView=dm.View.clone().newSlots({type:"dm.ProgressIndicatorView",progress:0,progressView:null}).setSlots({init:function(){this.setBackgroundColor(dm.Color.withRGBA(0,0,0,0.75));var a=dm.View.clone();this.setProgressView(a);a.performSets({width:0,height:this.height(),resizesHeight:true,resizesRight:true,backgroundColor:dm.Color.withRGBA(1,1,1,0.25)});this.addSubview(a)},setProgress:function(a){this._progress=a;this.progressView().setWidth(this.width()*a);return this}});dm.HtmlView=dm.View.clone().newSlots({type:"dm.HtmlView",html:""}).setSlots({setHtml:function(a){this._html=a;this.element().innerHTML=a;return this}});dm.Editable=dm.Delegator.clone().newSlots({type:"dm.Editable",watchesSlots:true,editableSlotDescriptions:[],editableSlots:null}).setSlots({init:function(){dm.Delegator.init.call(this);this.setEditableSlotDescriptions(this.editableSlotDescriptions().copy())},newEditableSlots:function(){var a=this;dm.Arguments_asArray(arguments).forEach(function(b){a.editableSlotDescriptions().append(b);a.newSlot(b.name,b.value);a["set"+b.name.asCapitalized()]=function(d){var c=this["_"+b.name];if(c!=d){this["_"+b.name]=d;if(this.watchesSlots()){this.delegatePerform("slotChanged",b.name,c,d)}}return this}});return this},editableSlots:function(){if(!this._editableSlots){this._editableSlots=[];var a=this;this.editableSlotDescriptions().forEach(function(c){var b=dm.Object_lookupPath(window,"dm.Editable"+c.control.type.asCapitalized()+"Slot").clone();var d=dm.Object_shallowCopy(c.control);delete d.type;b.control().performSets(d);b.setName(c.name);b.setNormalizer(c.normalizer);b.setObject(a);b.setSectionName(c.sectionName);if(c.label){b.label().performSets(c.label).sizeToFit()}a._editableSlots.append(b)})}return this._editableSlots},asObject:function(){var a={};this.editableSlots().forEach(function(b){a[b.name()]=b.value()});return a},asJson:function(){return JSON.stringify(this.asObject())}});dm.EditableSlot=dm.Proto.clone().newSlots({type:"dm.EditableSlot",object:null,name:null,normalizer:null,label:null,labelText:null,control:null,slotEditorView:null,controlProto:null,controlWidth:200,sectionName:null}).setSlots({label:function(){if(!this._label){var a=dm.Label.clone();a.setText(this.name().humanized());a.sizeToFit();this._label=a}return this._label},control:function(){if(!this._control){var a=this.controlProto().clone();a.setDelegate(this);this._control=a}return this._control},updateValue:function(){var a=this.control().value();var b=this.normalizer()||function(d){return d};try{a=b(a)}catch(c){console.log(c)}this.object().perform("set"+this.name().asCapitalized(),a)},value:function(){return this.object().perform(this.name())},addTo:function(b){var a=this.object().editableSlots().indexOf(this);b.setSectionName(this.sectionName());b.addAtRowCol(this.label(),a,0);this.control().setValue(this.value());if(this.controlWidth()){this.control().setWidth(this.controlWidth())}else{this.control().sizeWidthToFit()}this.control().sizeHeightToFit();b.addAtRowCol(this.control(),a,1);this.setSlotEditorView(b)}});dm.EditableCheckBoxSlot=dm.EditableSlot.clone().newSlots({type:"dm.EditableCheckBoxSlot",controlProto:dm.CheckBox,controlWidth:0}).setSlots({checkBoxChanged:function(a){}});dm.EditableDropDownSlot=dm.EditableSlot.clone().newSlots({type:"dm.EditableDropDownSlot",controlProto:dm.DropDown}).setSlots({dropDownChanged:function(a){this.updateValue()}});dm.EditableTextFieldSlot=dm.EditableSlot.clone().newSlots({type:"dm.EditableTextFieldSlot",controlProto:dm.TextField}).setSlots({textFieldChanged:function(a){if(this.slotEditorView()){this.slotEditorView().applyLayout()}},textFieldEditingEnded:function(a){this.updateValue()}});dm.EditableTextAreaSlot=dm.EditableSlot.clone().newSlots({type:"dm.EditableTextAreaSlot",controlProto:dm.TextArea}).setSlots({textAreaEditingEnded:function(a){}});dm.SlotEditorView=dm.TableView.clone().newSlots({type:"dm.SlotEditorView",object:null}).setSlots({init:function(){dm.TableView.init.call(this);this.alignCol(0,dm.TableView.ColAlignmentRight);this.alignCol(1,dm.TableView.ColAlignmentLeft)},setObject:function(b){this.empty();if(b){this._object=b;var a=this;b.editableSlots().forEach(function(c){c.addTo(a)})}},updateObject:function(){this.object().setWatchesSlots(false);this.object().editableSlots().forEachPerform("updateValue");this.object().setWatchesSlots(true);return this},midX:function(){return this.colWidth(0)+this.hMargin()+this.hMargin()/2}});dm.HttpResponse=dm.Proto.clone().newSlots({type:"dm.HttpResponse",body:null,statusCode:null}).setSlots({isSuccess:function(){var a=this.statusCode();return a>=200&&a<300}});dm.HttpRequest=dm.Delegator.clone().newSlots({type:"dm.HttpRequest",method:"GET",body:null,url:null,xmlHttpRequest:null,response:null,headers:null}).setSlots({init:function(){dm.Delegator.init.call(this);this.setXmlHttpRequest(new XMLHttpRequest());this.setHeaders({})},start:function(){var a=this;var b=this.xmlHttpRequest();b.open(this.method(),this.url(),true);dm.Object_eachSlot(this.headers(),function(d,c){b.setRequestHeader(d,c)});b.onreadystatechange=function(){if(b.readyState==4){var c=dm.HttpResponse.clone();c.setBody(b.responseText);c.setStatusCode(b.status);a.setResponse(c);a.delegatePerform("completed")}};b.send(this.body())},atPutHeader:function(a,b){this.headers()[a]=b;return this},retry:function(){this.setResponse(null);this.xmlHttpRequest().onreadystatechange=null;this.setXmlHttpRequest(new XMLHttpRequest());this.start()},cancel:function(){this.setDelegate(null);this.xmlHttpRequest().onreadystatechange=null}});dm.App=dm.Delegator.clone().newSlots({type:"dm.App"}).setSlots({init:function(){dm.Delegator.init.call(this);dm.Window.setDelegate(this)},windowInited:function(){this.start();this.delegatePerform("started")}});